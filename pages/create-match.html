<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cr√©er un Match - SportTicket</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <nav class="nav">
                <a href="../index.html" class="logo">
                    <div class="logo-icon">‚öΩ</div>
                    <span>SportTicket</span>
                </a>
                <div class="nav-actions">
                    <span style="color: var(--gray);">üèüÔ∏è FFP Events</span>
                    <a href="login.html" class="btn btn-outline btn-sm">D√©connexion</a>
                </div>
            </nav>
        </div>
    </header>

    <!-- Dashboard -->
    <div class="dashboard">
        <!-- Sidebar -->
        <aside class="sidebar">
            <ul class="sidebar-menu">
                <li><a href="organizer-dashboard.html"><i class="fas fa-chart-line"></i> Tableau de bord</a></li>
                <li><a href="create-match.html" class="active"><i class="fas fa-calendar-plus"></i> Cr√©er un match</a></li>
                <li><a href="my-matches.html"><i class="fas fa-futbol"></i> Mes matchs</a></li>
                <li><a href="#"><i class="fas fa-chart-bar"></i> Statistiques</a></li>
                <li><a href="#"><i class="fas fa-comments"></i> Avis clients</a></li>
                <li><a href="profile.html"><i class="fas fa-user"></i> Mon profil</a></li>
                <li><a href="login.html"><i class="fas fa-sign-out-alt"></i> D√©connexion</a></li>
            </ul>
        </aside>

        <!-- Main Content -->
        <main class="dashboard-content">
            <div class="d-flex justify-between align-center mb-3">
                <h2>‚öΩ CR√âER UN NOUVEAU MATCH</h2>
                <a href="organizer-dashboard.html" class="btn btn-secondary btn-sm">
                    <i class="fas fa-arrow-left"></i> Retour
                </a>
            </div>

            <!-- Alert Info -->
            <div class="alert alert-info mb-3">
                <i class="fas fa-info-circle"></i>
                <span>Votre demande de match sera soumise √† validation par l'administrateur avant publication.</span>
            </div>

            <!-- Create Match Form -->
            <div class="table-container">
                <form id="createMatchForm">
                    <!-- Step Indicator -->
                    <div class="step-indicator mb-3">
                        <div class="step active" data-step="1">
                            <div class="step-number">1</div>
                            <div class="step-label">√âquipes</div>
                        </div>
                        <div class="step" data-step="2">
                            <div class="step-number">2</div>
                            <div class="step-label">Date & Lieu</div>
                        </div>
                        <div class="step" data-step="3">
                            <div class="step-number">3</div>
                            <div class="step-label">Cat√©gories & Prix</div>
                        </div>
                        <div class="step" data-step="4">
                            <div class="step-number">4</div>
                            <div class="step-label">Confirmation</div>
                        </div>
                    </div>

                    <!-- Step 1: Teams -->
                    <div class="form-step active" id="step1">
                        <h3 style="margin-bottom: 25px; color: var(--accent);">üèÜ INFORMATIONS DES √âQUIPES</h3>
                        
                        <div class="teams-input-container">
                            <!-- Team 1 -->
                            <div class="team-input-card">
                                <h4>√âquipe Domicile</h4>
                                <div class="team-logo-upload">
                                    <div class="logo-preview" id="logo1Preview">
                                        <i class="fas fa-futbol"></i>
                                    </div>
                                    <input type="file" id="team1Logo" accept="image/*" hidden>
                                    <button type="button" class="btn btn-outline btn-sm" onclick="document.getElementById('team1Logo').click()">
                                        <i class="fas fa-upload"></i> Logo
                                    </button>
                                </div>
                                <div class="form-group">
                                    <label for="team1Name">Nom de l'√©quipe *</label>
                                    <input type="text" id="team1Name" class="form-control" placeholder="Ex: Paris Saint-Germain" required>
                                </div>
                                <div class="form-group">
                                    <label for="team1Short">Abr√©viation</label>
                                    <input type="text" id="team1Short" class="form-control" placeholder="Ex: PSG" maxlength="5">
                                </div>
                            </div>

                            <div class="vs-separator">
                                <span>VS</span>
                            </div>

                            <!-- Team 2 -->
                            <div class="team-input-card">
                                <h4>√âquipe Visiteur</h4>
                                <div class="team-logo-upload">
                                    <div class="logo-preview" id="logo2Preview">
                                        <i class="fas fa-futbol"></i>
                                    </div>
                                    <input type="file" id="team2Logo" accept="image/*" hidden>
                                    <button type="button" class="btn btn-outline btn-sm" onclick="document.getElementById('team2Logo').click()">
                                        <i class="fas fa-upload"></i> Logo
                                    </button>
                                </div>
                                <div class="form-group">
                                    <label for="team2Name">Nom de l'√©quipe *</label>
                                    <input type="text" id="team2Name" class="form-control" placeholder="Ex: Olympique de Marseille" required>
                                </div>
                                <div class="form-group">
                                    <label for="team2Short">Abr√©viation</label>
                                    <input type="text" id="team2Short" class="form-control" placeholder="Ex: OM" maxlength="5">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 2: Date & Location -->
                    <div class="form-step" id="step2">
                        <h3 style="margin-bottom: 25px; color: var(--accent);">üìÖ DATE, HEURE & LIEU</h3>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="matchDate">Date du match *</label>
                                <input type="date" id="matchDate" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="matchTime">Heure de coup d'envoi *</label>
                                <input type="time" id="matchTime" class="form-control" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="stadiumName">Nom du stade *</label>
                            <input type="text" id="stadiumName" class="form-control" placeholder="Ex: Parc des Princes" required>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="city">Ville *</label>
                                <input type="text" id="city" class="form-control" placeholder="Ex: Paris" required>
                            </div>
                            <div class="form-group">
                                <label for="address">Adresse</label>
                                <input type="text" id="address" class="form-control" placeholder="Ex: 24 Rue du Commandant Guilbaud">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="totalPlaces">Nombre total de places * (max 2000)</label>
                                <input type="number" id="totalPlaces" class="form-control" min="100" max="2000" value="2000" required>
                            </div>
                            <div class="form-group">
                                <label for="duration">Dur√©e du match (minutes)</label>
                                <input type="number" id="duration" class="form-control" value="90" readonly>
                                <small style="color: var(--gray);">Dur√©e standard de 90 minutes</small>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="competition">Comp√©tition</label>
                            <select id="competition" class="form-control">
                                <option value="">S√©lectionner une comp√©tition</option>
                                <option value="ligue1">Ligue 1</option>
                                <option value="ligue2">Ligue 2</option>
                                <option value="coupe-france">Coupe de France</option>
                                <option value="coupe-ligue">Coupe de la Ligue</option>
                                <option value="champions-league">Champions League</option>
                                <option value="europa-league">Europa League</option>
                                <option value="amical">Match Amical</option>
                                <option value="autre">Autre</option>
                            </select>
                        </div>
                    </div>

                    <!-- Step 3: Categories & Prices -->
                    <div class="form-step" id="step3">
                        <h3 style="margin-bottom: 25px; color: var(--accent);">üí∞ CAT√âGORIES & TARIFICATION</h3>
                        <p style="color: var(--gray); margin-bottom: 25px;">D√©finissez jusqu'√† 3 cat√©gories de places avec leurs prix respectifs.</p>

                        <div id="categoriesContainer">
                            <!-- Category 1 -->
                            <div class="category-card" data-category="1">
                                <div class="category-header">
                                    <span class="category-badge vip">Cat√©gorie 1</span>
                                    <label class="form-check">
                                        <input type="checkbox" checked disabled>
                                        <span>Active</span>
                                    </label>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>Nom de la cat√©gorie *</label>
                                        <input type="text" class="form-control category-name" value="VIP" required>
                                    </div>
                                    <div class="form-group">
                                        <label>Prix (‚Ç¨) *</label>
                                        <input type="number" class="form-control category-price" min="1" placeholder="120" required>
                                    </div>
                                    <div class="form-group">
                                        <label>Nombre de places *</label>
                                        <input type="number" class="form-control category-places" min="1" placeholder="200" required>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Description</label>
                                    <input type="text" class="form-control category-desc" placeholder="Ex: Acc√®s lounge, si√®ges premium, restauration incluse">
                                </div>
                            </div>

                            <!-- Category 2 -->
                            <div class="category-card" data-category="2">
                                <div class="category-header">
                                    <span class="category-badge tribune">Cat√©gorie 2</span>
                                    <label class="form-check">
                                        <input type="checkbox" class="category-toggle" checked>
                                        <span>Active</span>
                                    </label>
                                </div>
                                <div class="category-content">
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label>Nom de la cat√©gorie</label>
                                            <input type="text" class="form-control category-name" value="Tribune">
                                        </div>
                                        <div class="form-group">
                                            <label>Prix (‚Ç¨)</label>
                                            <input type="number" class="form-control category-price" min="1" placeholder="65">
                                        </div>
                                        <div class="form-group">
                                            <label>Nombre de places</label>
                                            <input type="number" class="form-control category-places" min="1" placeholder="800">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label>Description</label>
                                        <input type="text" class="form-control category-desc" placeholder="Ex: Vue d√©gag√©e sur le terrain">
                                    </div>
                                </div>
                            </div>

                            <!-- Category 3 -->
                            <div class="category-card" data-category="3">
                                <div class="category-header">
                                    <span class="category-badge pelouse">Cat√©gorie 3</span>
                                    <label class="form-check">
                                        <input type="checkbox" class="category-toggle" checked>
                                        <span>Active</span>
                                    </label>
                                </div>
                                <div class="category-content">
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label>Nom de la cat√©gorie</label>
                                            <input type="text" class="form-control category-name" value="Pelouse">
                                        </div>
                                        <div class="form-group">
                                            <label>Prix (‚Ç¨)</label>
                                            <input type="number" class="form-control category-price" min="1" placeholder="45">
                                        </div>
                                        <div class="form-group">
                                            <label>Nombre de places</label>
                                            <input type="number" class="form-control category-places" min="1" placeholder="1000">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label>Description</label>
                                        <input type="text" class="form-control category-desc" placeholder="Ex: Places √©conomiques">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="places-summary">
                            <div class="summary-row">
                                <span>Total des places configur√©es:</span>
                                <span id="configuredPlaces">0</span>
                            </div>
                            <div class="summary-row">
                                <span>Places restantes √† attribuer:</span>
                                <span id="remainingPlaces">2000</span>
                            </div>
                        </div>
                    </div>

                    <!-- Step 4: Confirmation -->
                    <div class="form-step" id="step4">
                        <h3 style="margin-bottom: 25px; color: var(--accent);">‚úÖ CONFIRMATION</h3>
                        <p style="color: var(--gray); margin-bottom: 25px;">V√©rifiez les informations avant de soumettre votre demande.</p>

                        <div class="confirmation-preview">
                            <!-- Match Preview Card -->
                            <div class="match-card" style="max-width: 100%;">
                                <div class="match-header">
                                    <span class="match-date" id="previewDate">üìÖ -- --- ---- - --:--</span>
                                    <span class="match-status status-pending">En attente</span>
                                </div>
                                <div class="match-teams">
                                    <div class="team">
                                        <div class="team-logo" id="previewLogo1">üè†</div>
                                        <div class="team-name" id="previewTeam1">√âquipe 1</div>
                                    </div>
                                    <div class="vs">VS</div>
                                    <div class="team">
                                        <div class="team-logo" id="previewLogo2">‚úàÔ∏è</div>
                                        <div class="team-name" id="previewTeam2">√âquipe 2</div>
                                    </div>
                                </div>
                                <div class="match-info">
                                    <div class="match-info-item">
                                        <i class="fas fa-map-marker-alt"></i>
                                        <span id="previewLocation">Stade, Ville</span>
                                    </div>
                                    <div class="match-info-item">
                                        <i class="fas fa-users"></i>
                                        <span id="previewPlaces">0 places</span>
                                    </div>
                                </div>
                                <div class="match-footer">
                                    <div class="match-price" id="previewPrice">√Ä partir de --‚Ç¨</div>
                                </div>
                            </div>

                            <!-- Categories Summary -->
                            <div class="categories-summary mt-3">
                                <h4>R√©capitulatif des cat√©gories</h4>
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>Cat√©gorie</th>
                                            <th>Places</th>
                                            <th>Prix</th>
                                            <th>Revenus potentiels</th>
                                        </tr>
                                    </thead>
                                    <tbody id="categoriesSummaryBody">
                                    </tbody>
                                    <tfoot>
                                        <tr style="font-weight: bold; background: var(--dark);">
                                            <td>TOTAL</td>
                                            <td id="totalPlacesSummary">0</td>
                                            <td>-</td>
                                            <td id="totalRevenueSummary">0‚Ç¨</td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </div>

                        <div class="form-group mt-3">
                            <label class="form-check">
                                <input type="checkbox" id="termsAccept" required>
                                <span>J'accepte les <a href="#" style="color: var(--accent);">conditions g√©n√©rales</a> et confirme que les informations sont exactes.</span>
                            </label>
                        </div>
                    </div>

                    <!-- Form Navigation -->
                    <div class="form-navigation">
                        <button type="button" class="btn btn-secondary" id="prevBtn" style="display: none;">
                            <i class="fas fa-arrow-left"></i> Pr√©c√©dent
                        </button>
                        <button type="button" class="btn btn-primary" id="nextBtn">
                            Suivant <i class="fas fa-arrow-right"></i>
                        </button>
                        <button type="submit" class="btn btn-success" id="submitBtn" style="display: none;">
                            <i class="fas fa-paper-plane"></i> Soumettre la demande
                        </button>
                    </div>
                </form>
            </div>
        </main>
    </div>

    <!-- Success Modal -->
    <div class="modal-overlay" id="successModal">
        <div class="modal">
            <div class="modal-body" style="text-align: center; padding: 50px;">
                <div style="font-size: 5rem; margin-bottom: 20px;">üéâ</div>
                <h2 style="margin-bottom: 15px;">DEMANDE ENVOY√âE !</h2>
                <p style="color: var(--gray); margin-bottom: 30px;">
                    Votre demande de cr√©ation de match a √©t√© soumise avec succ√®s.<br>
                    Elle sera examin√©e par notre √©quipe dans les plus brefs d√©lais.
                </p>
                <p style="margin-bottom: 30px;">
                    <span class="badge badge-warning" style="font-size: 1rem; padding: 10px 20px;">En attente de validation</span>
                </p>
                <div class="d-flex gap-2" style="justify-content: center;">
                    <a href="organizer-dashboard.html" class="btn btn-primary">
                        <i class="fas fa-home"></i> Tableau de bord
                    </a>
                    <a href="my-matches.html" class="btn btn-outline">
                        <i class="fas fa-futbol"></i> Mes matchs
                    </a>
                </div>
            </div>
        </div>
    </div>

    <style>
        /* Additional styles for this page */
        .step-indicator {
            display: flex;
            justify-content: space-between;
            margin-bottom: 40px;
            position: relative;
        }
        
        .step-indicator::before {
            content: '';
            position: absolute;
            top: 20px;
            left: 10%;
            right: 10%;
            height: 2px;
            background: var(--gray);
            z-index: 0;
        }
        
        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 1;
        }
        
        .step-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--secondary);
            border: 2px solid var(--gray);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 10px;
            transition: var(--transition);
        }
        
        .step.active .step-number,
        .step.completed .step-number {
            background: var(--accent);
            border-color: var(--accent);
        }
        
        .step.completed .step-number::after {
            content: '‚úì';
        }
        
        .step-label {
            font-size: 0.85rem;
            color: var(--gray);
        }
        
        .step.active .step-label {
            color: var(--accent);
            font-weight: 600;
        }
        
        .form-step {
            display: none;
        }
        
        .form-step.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .teams-input-container {
            display: flex;
            gap: 30px;
            align-items: flex-start;
            flex-wrap: wrap;
        }
        
        .team-input-card {
            flex: 1;
            min-width: 280px;
            background: var(--dark);
            border-radius: var(--radius-lg);
            padding: 25px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .team-input-card h4 {
            font-family: 'Bebas Neue', cursive;
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: var(--light);
        }
        
        .team-logo-upload {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .logo-preview {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: var(--secondary);
            border: 3px dashed var(--gray);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: var(--gray);
            overflow: hidden;
        }
        
        .logo-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .vs-separator {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .vs-separator span {
            font-family: 'Bebas Neue', cursive;
            font-size: 3rem;
            color: var(--accent);
        }
        
        .category-card {
            background: var(--dark);
            border-radius: var(--radius-md);
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .category-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .category-badge {
            padding: 8px 20px;
            border-radius: var(--radius-xl);
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        .category-badge.vip {
            background: rgba(233, 69, 96, 0.2);
            color: var(--accent);
        }
        
        .category-badge.tribune {
            background: rgba(0, 210, 106, 0.2);
            color: var(--success);
        }
        
        .category-badge.pelouse {
            background: rgba(255, 193, 7, 0.2);
            color: var(--warning);
        }
        
        .category-content {
            transition: var(--transition);
        }
        
        .category-card.disabled .category-content {
            opacity: 0.3;
            pointer-events: none;
        }
        
        .places-summary {
            background: var(--secondary);
            border-radius: var(--radius-md);
            padding: 20px;
            margin-top: 20px;
        }
        
        .summary-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .summary-row:last-child {
            border-bottom: none;
            font-weight: bold;
            color: var(--accent);
        }
        
        .confirmation-preview {
            background: var(--dark);
            border-radius: var(--radius-lg);
            padding: 30px;
        }
        
        .categories-summary h4 {
            margin-bottom: 15px;
            font-family: 'Bebas Neue', cursive;
        }
        
        .form-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            padding-top: 30px;
            border-top: 1px solid rgba(255,255,255,0.1);
        }
        
        @media (max-width: 768px) {
            .teams-input-container {
                flex-direction: column;
            }
            
            .vs-separator {
                padding: 10px;
            }
            
            .vs-separator span {
                font-size: 2rem;
            }
            
            .step-label {
                display: none;
            }
        }
    </style>

    <script>
        // Multi-step form logic
        let currentStep = 1;
        const totalSteps = 4;

        const nextBtn = document.getElementById('nextBtn');
        const prevBtn = document.getElementById('prevBtn');
        const submitBtn = document.getElementById('submitBtn');

        function updateSteps() {
            // Update step indicators
            document.querySelectorAll('.step').forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index + 1 < currentStep) {
                    step.classList.add('completed');
                } else if (index + 1 === currentStep) {
                    step.classList.add('active');
                }
            });

            // Update form steps
            document.querySelectorAll('.form-step').forEach((step, index) => {
                step.classList.remove('active');
                if (index + 1 === currentStep) {
                    step.classList.add('active');
                }
            });

            // Update buttons
            prevBtn.style.display = currentStep === 1 ? 'none' : 'inline-flex';
            nextBtn.style.display = currentStep === totalSteps ? 'none' : 'inline-flex';
            submitBtn.style.display = currentStep === totalSteps ? 'inline-flex' : 'none';

            // Update preview on step 4
            if (currentStep === 4) {
                updatePreview();
            }
        }

        nextBtn.addEventListener('click', () => {
            if (validateStep(currentStep)) {
                currentStep++;
                updateSteps();
            }
        });

        prevBtn.addEventListener('click', () => {
            currentStep--;
            updateSteps();
        });

        function validateStep(step) {
            // Basic validation per step
            if (step === 1) {
                const team1 = document.getElementById('team1Name').value;
                const team2 = document.getElementById('team2Name').value;
                if (!team1 || !team2) {
                    alert('Veuillez renseigner les noms des deux √©quipes.');
                    return false;
                }
            } else if (step === 2) {
                const date = document.getElementById('matchDate').value;
                const time = document.getElementById('matchTime').value;
                const stadium = document.getElementById('stadiumName').value;
                const city = document.getElementById('city').value;
                if (!date || !time || !stadium || !city) {
                    alert('Veuillez remplir tous les champs obligatoires.');
                    return false;
                }
            } else if (step === 3) {
                // Check at least category 1 has values
                const cat1Price = document.querySelector('[data-category="1"] .category-price').value;
                const cat1Places = document.querySelector('[data-category="1"] .category-places').value;
                if (!cat1Price || !cat1Places) {
                    alert('Veuillez configurer au moins la cat√©gorie 1.');
                    return false;
                }
            }
            return true;
        }

        function updatePreview() {
            // Update preview with form data
            document.getElementById('previewTeam1').textContent = document.getElementById('team1Name').value || '√âquipe 1';
            document.getElementById('previewTeam2').textContent = document.getElementById('team2Name').value || '√âquipe 2';
            
            const date = document.getElementById('matchDate').value;
            const time = document.getElementById('matchTime').value;
            if (date && time) {
                const dateObj = new Date(date);
                const options = { day: 'numeric', month: 'short', year: 'numeric' };
                document.getElementById('previewDate').textContent = `üìÖ ${dateObj.toLocaleDateString('fr-FR', options)} - ${time}`;
            }
            
            const stadium = document.getElementById('stadiumName').value;
            const city = document.getElementById('city').value;
            document.getElementById('previewLocation').textContent = `${stadium}, ${city}`;
            
            const totalPlaces = document.getElementById('totalPlaces').value;
            document.getElementById('previewPlaces').textContent = `${totalPlaces} places`;

            // Categories summary
            let summaryHtml = '';
            let totalPlacesSum = 0;
            let totalRevenue = 0;
            let minPrice = Infinity;

            document.querySelectorAll('.category-card').forEach(card => {
                const name = card.querySelector('.category-name').value;
                const price = parseInt(card.querySelector('.category-price').value) || 0;
                const places = parseInt(card.querySelector('.category-places').value) || 0;
                
                if (places > 0 && price > 0) {
                    const revenue = price * places;
                    totalPlacesSum += places;
                    totalRevenue += revenue;
                    if (price < minPrice) minPrice = price;
                    
                    summaryHtml += `
                        <tr>
                            <td>${name}</td>
                            <td>${places}</td>
                            <td>${price}‚Ç¨</td>
                            <td>${revenue.toLocaleString()}‚Ç¨</td>
                        </tr>
                    `;
                }
            });

            document.getElementById('categoriesSummaryBody').innerHTML = summaryHtml;
            document.getElementById('totalPlacesSummary').textContent = totalPlacesSum;
            document.getElementById('totalRevenueSummary').textContent = totalRevenue.toLocaleString() + '‚Ç¨';
            document.getElementById('previewPrice').textContent = `√Ä partir de ${minPrice === Infinity ? '--' : minPrice}‚Ç¨`;
        }

        // Logo preview
        ['team1Logo', 'team2Logo'].forEach((id, index) => {
            document.getElementById(id).addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        document.getElementById(`logo${index + 1}Preview`).innerHTML = `<img src="${e.target.result}" alt="Logo">`;
                    };
                    reader.readAsDataURL(file);
                }
            });
        });

        // Category toggle
        document.querySelectorAll('.category-toggle').forEach(toggle => {
            toggle.addEventListener('change', function() {
                const card = this.closest('.category-card');
                card.classList.toggle('disabled', !this.checked);
            });
        });

        // Calculate places
        document.querySelectorAll('.category-places').forEach(input => {
            input.addEventListener('input', updatePlacesSummary);
        });

        function updatePlacesSummary() {
            let total = 0;
            document.querySelectorAll('.category-card:not(.disabled) .category-places').forEach(input => {
                total += parseInt(input.value) || 0;
            });
            document.getElementById('configuredPlaces').textContent = total;
            const maxPlaces = parseInt(document.getElementById('totalPlaces').value) || 2000;
            document.getElementById('remainingPlaces').textContent = maxPlaces - total;
        }

        // Form submission
        document.getElementById('createMatchForm').addEventListener('submit', function(e) {
            e.preventDefault();
            if (document.getElementById('termsAccept').checked) {
                document.getElementById('successModal').classList.add('active');
            } else {
                alert('Veuillez accepter les conditions g√©n√©rales.');
            }
        });
    </script>
</body>
</html>